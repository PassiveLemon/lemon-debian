#!/usr/bin/env bash

if [ $EUID = 0 ]; then
  echo "====================================="
  echo "Please do not run this script as Sudo"
  echo "====================================="
  exit
fi

sudo mkdir $HOME/lemontemp/
pushd $HOME/lemontemp/

sudo apt install -y git unzip tar curl

echo "|| Getting dotfiles ||"
sudo git clone https://github.com/PassiveLemon/lemondots/

cp -r lemondots/.config/ $HOME/
cp -r lemondots/.fonts/ $HOME/
cp -r lemondots/.icons/ $HOME/
cp -r lemondots/.themes/ $HOME/
cp -r lemondots/.wallpapers/ $HOME/
cp lemondots/.gtkrc-2.0 $HOME/
cp lemondots/.xinitrc $HOME/
rm $HOME/LICENSE
rm $HOME/README.md
sudo mv /etc/default/grub /etc/default/grub.bak
sudo cp lemondots/grub /etc/default/

echo "|| Extracting archives ||"
cd $HOME/.icons/
sudo unzip kora_*.zip
sudo tar xvzf volantes*.tar.gz

sudo rm *.zip *.tar.gz

cd $HOME/.themes/
sudo tar -xf nordic-darker*.tar.xz

sudo rm *.tar.xz

sudo mkdir -p /boot/grub/themes/debian/
cd /boot/grub/themes/debian/
sudo curl -LO https://github.com/AdisonCavani/distro-grub-themes/releases/download/v2.8/debian.tar
sudo tar -xvf debian.tar
sudo rm -rf debian.tar
sudo update-grub

sudo rm -r $HOME/lemontemp/

echo "|| Changing permissions ||"
sudo chmod u+x $HOME/.xinitrc
sudo chmod u+x $HOME/.config/bspwm/bspwmrc
sudo chmod u+x $HOME/.config/bspwm/bspwmrc
popd
